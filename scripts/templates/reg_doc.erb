[cols="1s,1,1,1"]
|===
| register
<%- soc.keys.each do |p| -%>
^| <%= p -%>

<%- end -%>

<%- conf_regs.sort.each do |r| -%>
| <<<%= r %>>>
<%- soc.keys.each do |p| -%>
<% if cfg[p][r.upcase] -%>
^| yes
<% else -%>
^s| no
<%- end -%>
<%- end -%>

<%- end -%>

|===

Register fields below are given including start and end bits. The
value following in parenthesis is the default value.

<%- conf_regs.sort.each do |r| -%>
=== <%= r %>

Applies to: <%- cfg.each do |p, k| -%>
<%- if cfg[p][r.upcase] -%>
<%= p -%>
<%- end -%>

<%- end -%>

[cols="1s,1,1,1"]
|===
| Field
<%- fields = Hash.new -%>
<%- all = Array.new -%>
<%- soc.keys.each do |p| -%>
<%- fields[p] = soc[p].fields(r) -%>
<%- if fields[p] -%>
<%- all += fields[p].map{|f| f[:name]} -%>
<%- end -%>
^s| <%= p %>
<%- end %>

<%- all.uniq.each do |fname| -%>
| <%= fname -%>
 <%- fields.keys.each do |p| -%>
  <%- if fields[p] -%>
   <%- f = fields[p].find{|h| h[:name] == fname} -%>
    <%- if f -%>

^| bit <%= f[:width] == 1 ? f[:pos] : sprintf("%d..%d", f[:width] - 1, f[:pos]) -%> (<%= f[:default] -%>)

    <%- else -%>

^| 
    <%- end -%>
  <%- else -%>

^| 
  <%- end -%>
 <%- end -%>
<%- end -%>

|===

<%- end -%>
